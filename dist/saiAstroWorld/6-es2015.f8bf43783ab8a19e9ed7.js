(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"13Su":function(t,e,a){"use strict";a.r(e);var r=a("ofXK"),o=a("j5wd"),i=a("3Pt+"),n=a("tyNb"),c=a("fXoL"),s=a("Wp6s"),l=a("NFeN");let d=(()=>{class t{constructor(t){this._route=t}ngOnInit(){}astroReport(){this._route.navigate(["dashboard/astroReport"])}astroQuestion(){this._route.navigate(["dashboard/astroQuestion"])}chatUser(){this._route.navigate(["/chat"])}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(n.c))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-astrologer-dashboard"]],decls:44,vars:0,consts:[[1,"container"],[1,"astro-dashboard-wrapper"],[1,"separator","my-5"],[1,"dashboard-title","text"],[1,"row"],[1,"col-md-3","my-3"],[1,"card1",3,"click"],["href","#",1,"go-corner"],[1,"go-arrow"],[1,"card1"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"div",2),c.Vb(3,"span",3),c.Kc(4,"Dashboard"),c.Ub(),c.Ub(),c.Vb(5,"div",4),c.Vb(6,"div",5),c.Vb(7,"mat-card",6),c.dc("click",(function(){return e.astroReport()})),c.Vb(8,"mat-icon"),c.Kc(9,"assignment"),c.Ub(),c.Vb(10,"h1"),c.Kc(11,"Report"),c.Ub(),c.Vb(12,"div",7),c.Vb(13,"div",8),c.Kc(14," \u2192 "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(15,"div",5),c.Vb(16,"mat-card",6),c.dc("click",(function(){return e.astroQuestion()})),c.Vb(17,"mat-icon"),c.Kc(18,"question_answer"),c.Ub(),c.Vb(19,"h1"),c.Kc(20,"Question "),c.Ub(),c.Vb(21,"div",7),c.Vb(22,"div",8),c.Kc(23," \u2192 "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(24,"div",5),c.Vb(25,"mat-card",9),c.Vb(26,"span"),c.Vb(27,"mat-icon"),c.Kc(28,"call"),c.Ub(),c.Ub(),c.Vb(29,"h1"),c.Kc(30,"Call "),c.Ub(),c.Vb(31,"div",7),c.Vb(32,"div",8),c.Kc(33," \u2192 "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(34,"div",5),c.Vb(35,"mat-card",6),c.dc("click",(function(){return e.chatUser()})),c.Vb(36,"span"),c.Vb(37,"mat-icon"),c.Kc(38,"chat"),c.Ub(),c.Ub(),c.Vb(39,"h1"),c.Kc(40,"Chat "),c.Ub(),c.Vb(41,"div",7),c.Vb(42,"div",8),c.Kc(43," \u2192 "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub())},directives:[s.a,l.a],styles:['.astro-dashboard-wrapper[_ngcontent-%COMP%]{text-align:center;margin-bottom:78px}.astro-dashboard-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:orange}.astro-dashboard-wrapper[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%], .astro-dashboard-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;color:#000}.go-corner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;width:32px;height:32px;overflow:hidden;top:0;right:0;background-color:#f9a825;border-radius:0 4px 0 32px}.go-arrow[_ngcontent-%COMP%]{margin-top:-4px;margin-right:-4px;color:#fff;font-family:courier,sans}.card1[_ngcontent-%COMP%]{display:block;position:relative;background-color:#fff;border-radius:4px;text-decoration:none;z-index:0;overflow:hidden}.card1[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:-1;top:-16px;right:-16px;background:#f9a825;height:32px;width:32px;border-radius:32px;transform:scale(1);transform-origin:50% 50%;transition:transform .7s ease-out}.card1[_ngcontent-%COMP%]:hover:before{transform:scale(30)}.card1[_ngcontent-%COMP%]:hover{cursor:pointer}.card1[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{transition:all .3s ease-out;color:hsla(0,0%,100%,.8)}.card1[_ngcontent-%COMP%]:hover   h1[_ngcontent-%COMP%]{transition:all .3s ease-out;color:#fff}']}),t})();var b=a("mrSG"),m=a("+0xr"),u=a("M9IT"),p=a("Dh3D"),f=a("0IaG"),h=a("bTqV");let g=(()=>{class t{constructor(t){this._dialogRef=t}ngOnInit(){}closeModal(t){this._dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(f.e))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-confirmation-modal"]],decls:9,vars:0,consts:[[1,"modal-confirmation"],[1,"text-center"],[1,"clearfix"],[1,"float-right","mt-5"],["mat-raised-button","","color","accent",1,"mr-2",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"p",1),c.Kc(2,"Are you sure you want to change the status ?"),c.Ub(),c.Vb(3,"div",2),c.Vb(4,"div",3),c.Vb(5,"button",4),c.dc("click",(function(){return e.closeModal("N")})),c.Kc(6,"No"),c.Ub(),c.Vb(7,"button",5),c.dc("click",(function(){return e.closeModal("Y")})),c.Kc(8,"Yes"),c.Ub(),c.Ub(),c.Ub(),c.Ub())},directives:[h.a],styles:[""]}),t})();var v=a("qXBG"),U=a("XkrU"),C=a("bQS5"),V=a("qu8s"),w=a("C8F9");let y=(()=>{class t{constructor(t,e){this.restService=t,this._profileUpdateService=e}getReportByAstroId(t){return this.restService.create(C.a.getReportByAstroId,t)}replyReports(t){return this._profileUpdateService.createFormData(C.a.replyReports,t)}deductQtsAnsBalance(t){return this.restService.create(C.a.deductBalance,t)}acceptReject(t){return this.restService.create(C.a.acceptRejectReq,t)}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(V.a),c.Zb(w.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=a("QR3m"),S=a("XhcP"),M=a("kmnG"),I=a("qFsG"),P=a("d3UM"),N=a("FKr1");const O=["reportSideNav"],x=["text"];function R(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Edit "),c.Ub())}function A(t,e){1&t&&(c.Vb(0,"mat-icon"),c.Kc(1," edit "),c.Ub())}function K(t,e){if(1&t){const t=c.Wb();c.Vb(0,"td",47),c.dc("click",(function(){c.Bc(t);const a=e.$implicit,r=c.hc(),o=c.xc(2);return r.editQuestion(o,a)})),c.Ic(1,A,2,0,"mat-icon",48),c.Ub()}if(2&t){const t=e.$implicit;c.Cb(1),c.pc("ngIf",!t.isAnswered&&(null==t.isRequestAccpted||t.isRequestAccpted))}}function k(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," SrNo. "),c.Ub())}function D(t,e){if(1&t&&(c.Vb(0,"td",49),c.Kc(1),c.Ub()),2&t){const t=e.index;c.Cb(1),c.Mc(" ",t+1," ")}}function F(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Report Type "),c.Ub())}function q(t,e){if(1&t&&(c.Vb(0,"td",50),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.Mc(" ",t.reportSubType,"")}}function T(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Name "),c.Ub())}function Q(t,e){if(1&t&&(c.Vb(0,"td",51),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.Mc(" ",t.firstName," ")}}function B(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Mobile Number "),c.Ub())}function j(t,e){if(1&t&&(c.Vb(0,"td",52),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.Mc(" ",t.mobileNumber," ")}}function z(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Action "),c.Ub())}function L(t,e){if(1&t&&(c.Vb(0,"mat-option",58),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.pc("value",t.name),c.Cb(1),c.Mc(" ",t.name," ")}}function $(t,e){if(1&t){const t=c.Wb();c.Vb(0,"td",53),c.Vb(1,"div",54),c.Vb(2,"mat-form-field",55),c.Vb(3,"mat-label"),c.Kc(4,"Status"),c.Ub(),c.Vb(5,"mat-select",56),c.dc("selectionChange",(function(a){c.Bc(t);const r=e.$implicit,o=e.index;return c.hc().statusChange(a,r,o)})),c.Ic(6,L,2,2,"mat-option",57),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){const t=e.$implicit,a=c.hc();c.Cb(5),c.pc("value",t.isRequestAccpted?"Accept":null==t.isRequestAccpted?"":"Reject")("disabled",null!=t.isRequestAccpted),c.Cb(1),c.pc("ngForOf",a.statusTypeList)}}function E(t,e){1&t&&c.Qb(0,"tr",59)}function G(t,e){1&t&&c.Qb(0,"tr",60)}function J(t,e){if(1&t&&(c.Vb(0,"tr",61),c.Vb(1,"td",62),c.Kc(2),c.Ub(),c.Ub()),2&t){c.hc();const t=c.xc(55);c.Cb(2),c.Mc('No data matching the filter "',t.value,'"')}}const W=function(){return[5,10,25,100]};let H=(()=>{class t{constructor(t,e,a,r,o,n){this._authService=t,this._commonService=e,this._astroReportService=a,this._authenticationService=r,this._formBuilder=o,this._dialog=n,this.displayedColumns=["edit","srNo","reportSubType","firstName","mobileNumber","actions"],this.mode=new i.d("over"),this.characters=0,this.statusTypeList=[],this.statusTypeList=[{id:1,name:"Accept"},{id:2,name:"Reject"}]}ngOnInit(){this.validateForm=this._formBuilder.group({firstName:[{value:null,disabled:!0},[i.t.required]],lastName:[{value:null,disabled:!0},[i.t.required]],comment:[{value:null,disabled:!0},[i.t.required,i.t.email]],mobileNumber:[{value:null,disabled:!0},[i.t.required]],reportSubType:[{value:null,disabled:!0},[i.t.required]],employment:[{value:null,disabled:!0},[i.t.required]],message:[null,[i.t.required]]}),this.dataSource=new m.k(this.users),this.userData=this._authenticationService.getUser(),this.getReportByAstrologer()}wordCounter(){this.wordCount=this.text?this.text.nativeElement.value.split(/\s+/):0,this.words=this.wordCount?this.wordCount.length:0}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getReportByAstrologer(){null!=this.userData?this._astroReportService.getReportByAstroId({astrologerId:this.userData._id}).subscribe(t=>{console.log("getQuestionByAstroId ResponseBody ",t);let e=t.message;if(200==t.status){let a=[];t.data.map(t=>{a.push({_id:t._id,astrologerId:t.astrologerId,comment:t.comment,createdAt:t.createdAt,employment:t.employment,firstName:t.firstName,lastName:t.lastName,mobileNumber:t.mobileNumber,reportSubType:t.reportSubType,reportType:t.reportType,userId:t.userId,isAnswered:t.isAnswered,isRequestAccpted:t.isRequestAccpted}),this.users=a}),console.log("this.users ",this.users),this.dataSource=new m.k(this.users),this.ngAfterViewInit(),this._commonService.tostMessage(e)}else 300==t.status?(this._commonService.tostMessage(e),this._authService.logOut()):this._commonService.tostMessage(e)}):alert("Astro login required")}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editQuestion(t,e){t.toggle(),console.log("Side bar data",e),this.validateForm.patchValue({firstName:e.firstName,lastName:e.lastName,comment:e.comment,mobileNumber:e.mobileNumber,reportSubType:e.reportSubType,employment:e.employment}),this.selectedUser=e}submitForm(t){for(const a in this.validateForm.controls)this.validateForm.controls[a].markAsDirty(),this.validateForm.controls[a].updateValueAndValidity();console.log("submit Form ",t),console.log("this.selectedUser ",this.selectedUser);const e=new FormData;e.append("message",t.message),e.append("userId",this.selectedUser.userId),e.append("astrologerId",this.selectedUser.astrologerId),e.append("queryId",this.selectedUser._id),e.append("reportType",this.selectedUser.reportType),this._astroReportService.replyReports(e).subscribe(t=>Object(b.b)(this,void 0,void 0,(function*(){console.log("responseDataa ",t);let e=t.message;200==t.status?(this._commonService.tostMessage(e),this.dataSource.data.filter((t,e)=>{this.selectedUserIndex==e&&(t.isAnswered=!0)}),this.dataSource.filter="",this.validateForm.reset(),this.sidenav.close()):300==t.status?(this._commonService.tostMessage(e),this._authService.logOut()):this._commonService.tostMessage(e)})))}resetForm(t){t.preventDefault(),this.validateForm.controls.message.reset();for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsPristine(),this.validateForm.controls[e].updateValueAndValidity()}count(t){this.characters=0+t.length}closeDrawer(t){t.toggle(),this.validateForm.reset(),this.selectedUserStatusEvent.source.writeValue(null)}statusChange(t,e,a){this.selectedUser=e,this.selectedUserStatusEvent=t,this.selectedUserIndex=a,this._dialog.open(g,{width:"400px"}).afterClosed().subscribe(r=>{if("Y"==r){let r=JSON.parse(sessionStorage.getItem("userData"));this.acceptReject({userId:r.userId,queryId:e._id,isRequestAccpted:t&&"Accept"==t.value?"true":"false"}).then(e=>{console.log(e,"response"),t&&"Accept"==t.value&&this.deductions(),this.dataSource.data.filter((e,r)=>{a==r&&(e.isRequestAccpted=!(!t||"Accept"!=t.value))}),this.dataSource.filter=""})}else t.source.writeValue(null)})}deductions(){return new Promise(t=>{this._astroReportService.deductQtsAnsBalance({type:"report",userId:this.selectedUser.userId,astrologerId:this.selectedUser.astrologerId}).subscribe(e=>t(e))})}acceptReject(t){return new Promise(e=>{this._astroReportService.acceptReject(t).subscribe(t=>e(t))})}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(v.a),c.Pb(U.a),c.Pb(y),c.Pb(_.a),c.Pb(i.c),c.Pb(f.b))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-astro-report"]],viewQuery:function(t,e){var a;1&t&&(c.Pc(u.a,!0),c.Pc(p.a,!0),c.Pc(O,!0),c.Pc(x,!0)),2&t&&(c.wc(a=c.ec())&&(e.paginator=a.first),c.wc(a=c.ec())&&(e.sort=a.first),c.wc(a=c.ec())&&(e.sidenav=a.first),c.wc(a=c.ec())&&(e.text=a.first))},decls:80,vars:9,consts:[[1,"drawer-container"],["position","end","disableClose","",3,"mode"],["reportSideNav",""],["mat-mini-fab","","color","primary","aria-label","Close Menu",1,"close-drawer",3,"click"],[1,"form-wrapper"],[1,"separator","mb-5"],[1,"edit-form-title","text"],["name","validateForm","novalidate","",3,"formGroup"],[1,"form-field-width"],["matInput","","formControlName","firstName","required",""],["matInput","","formControlName","lastName","required",""],["matInput","","formControlName","reportSubType","required",""],["matInput","","formControlName","employment","required",""],[1,"form-field-full-width"],["matInput","","formControlName","comment","required",""],["matInput","","formControlName","message","maxlength","4000","required","",3,"keyup"],["message",""],["align","start"],[1,"mt-5"],["mat-raised-button","","color","primary","aria-label","LOGIN",1,"submit-button","mt-3","mr-5",3,"disabled","click"],["mat-stroked-button","","color","warn",1,"mt-3",3,"click"],[1,"container","wrapper-box"],["mat-mini-fab","","color","primary","routerLink","/dashboard",1,"my-3"],[1,"separator","mb-1"],[1,"dashboard-title","text"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8","mb-5"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","edit-report","mat-cell","","data-label","Edit",3,"click",4,"matCellDef"],["matColumnDef","srNo"],["mat-cell","","data-label","SrNo.",4,"matCellDef"],["matColumnDef","reportSubType"],["mat-cell","","data-label","Report Type",4,"matCellDef"],["matColumnDef","firstName"],["mat-cell","","data-label","Name",4,"matCellDef"],["matColumnDef","mobileNumber"],["mat-cell","","data-label","Mobile Number",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","data-label","Action",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","data-label","Edit",1,"edit-report",3,"click"],[4,"ngIf"],["mat-cell","","data-label","SrNo."],["mat-cell","","data-label","Report Type"],["mat-cell","","data-label","Name"],["mat-cell","","data-label","Mobile Number"],["mat-cell","","data-label","Action"],[1,"select-status"],["appearance","fill"],[3,"value","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){if(1&t){const t=c.Wb();c.Vb(0,"mat-sidenav-container",0),c.Vb(1,"mat-sidenav",1,2),c.Vb(3,"button",3),c.dc("click",(function(){c.Bc(t);const a=c.xc(2);return e.closeDrawer(a)})),c.Vb(4,"mat-icon"),c.Kc(5,"close"),c.Ub(),c.Ub(),c.Vb(6,"div",4),c.Vb(7,"div",5),c.Vb(8,"span",6),c.Kc(9,"Reply Report Form"),c.Ub(),c.Ub(),c.Vb(10,"form",7),c.Vb(11,"mat-form-field",8),c.Vb(12,"mat-label"),c.Kc(13,"First Name"),c.Ub(),c.Qb(14,"input",9),c.Ub(),c.Vb(15,"mat-form-field",8),c.Vb(16,"mat-label"),c.Kc(17,"Last Name"),c.Ub(),c.Qb(18,"input",10),c.Ub(),c.Vb(19,"mat-form-field",8),c.Vb(20,"mat-label"),c.Kc(21,"Report Type"),c.Ub(),c.Qb(22,"input",11),c.Ub(),c.Vb(23,"mat-form-field",8),c.Vb(24,"mat-label"),c.Kc(25,"Employment"),c.Ub(),c.Qb(26,"input",12),c.Ub(),c.Vb(27,"mat-form-field",13),c.Vb(28,"mat-label"),c.Kc(29,"Question"),c.Ub(),c.Qb(30,"textarea",14),c.Ub(),c.Vb(31,"mat-form-field",13),c.Vb(32,"mat-label"),c.Kc(33,"Answer"),c.Ub(),c.Vb(34,"textarea",15,16),c.dc("keyup",(function(){c.Bc(t);const a=c.xc(35);return e.count(a.value)})),c.Ub(),c.Vb(36,"mat-hint",17),c.Kc(37),c.Ub(),c.Ub(),c.Vb(38,"div",18),c.Vb(39,"button",19),c.dc("click",(function(){return e.submitForm(e.validateForm.value)})),c.Kc(40," Submit "),c.Ub(),c.Vb(41,"button",20),c.dc("click",(function(t){return e.resetForm(t)})),c.Kc(42," Reset "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(43,"mat-sidenav-content"),c.Vb(44,"div",21),c.Vb(45,"button",22),c.Vb(46,"mat-icon"),c.Kc(47,"keyboard_arrow_left"),c.Ub(),c.Ub(),c.Vb(48,"div",23),c.Vb(49,"span",24),c.Kc(50,"Reports"),c.Ub(),c.Ub(),c.Vb(51,"mat-form-field"),c.Vb(52,"mat-label"),c.Kc(53,"Filter"),c.Ub(),c.Vb(54,"input",25,26),c.dc("keyup",(function(t){return e.applyFilter(t)})),c.Ub(),c.Ub(),c.Vb(56,"div",27),c.Vb(57,"table",28),c.Tb(58,29),c.Ic(59,R,2,0,"th",30),c.Ic(60,K,2,1,"td",31),c.Sb(),c.Tb(61,32),c.Ic(62,k,2,0,"th",30),c.Ic(63,D,2,1,"td",33),c.Sb(),c.Tb(64,34),c.Ic(65,F,2,0,"th",30),c.Ic(66,q,2,1,"td",35),c.Sb(),c.Tb(67,36),c.Ic(68,T,2,0,"th",30),c.Ic(69,Q,2,1,"td",37),c.Sb(),c.Tb(70,38),c.Ic(71,B,2,0,"th",30),c.Ic(72,j,2,1,"td",39),c.Sb(),c.Tb(73,40),c.Ic(74,z,2,0,"th",30),c.Ic(75,$,7,3,"td",41),c.Sb(),c.Ic(76,E,1,0,"tr",42),c.Ic(77,G,1,0,"tr",43),c.Ic(78,J,3,1,"tr",44),c.Ub(),c.Qb(79,"mat-paginator",45),c.Ub(),c.Ub(),c.Ub(),c.Ub()}2&t&&(c.Cb(1),c.pc("mode",e.mode.value),c.Cb(9),c.pc("formGroup",e.validateForm),c.Cb(27),c.Mc("",e.characters," / 4000"),c.Cb(2),c.pc("disabled",e.validateForm.invalid),c.Cb(18),c.pc("dataSource",e.dataSource),c.Cb(19),c.pc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.pc("matRowDefColumns",e.displayedColumns),c.Cb(2),c.pc("pageSizeOptions",c.rc(8,W)))},directives:[S.b,S.a,h.a,l.a,i.u,i.o,i.g,M.c,M.g,I.b,i.b,i.n,i.e,i.s,i.i,M.f,S.c,n.d,m.j,p.a,m.c,m.e,m.b,m.g,m.i,u.a,m.d,p.b,m.a,r.k,P.a,r.j,N.n,m.f,m.h],styles:[".drawer-container[_ngcontent-%COMP%]   button.close-drawer[_ngcontent-%COMP%]{margin-left:15px}table[_ngcontent-%COMP%]{width:100%}.mat-drawer[_ngcontent-%COMP%]{max-width:75%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.form-wrapper[_ngcontent-%COMP%]{text-align:center}.form-wrapper[_ngcontent-%COMP%]   .form-field-width[_ngcontent-%COMP%]{width:40%;margin-right:10px;line-height:25px}.form-wrapper[_ngcontent-%COMP%]   .form-field-full-width[_ngcontent-%COMP%]{width:83%}.form-wrapper[_ngcontent-%COMP%]   .edit-form-title[_ngcontent-%COMP%]{color:#000;font-size:18px}.mat-row[_ngcontent-%COMP%]:hover{background:rgba(235,166,26,.53)}.edit-report[_ngcontent-%COMP%]{cursor:pointer}.dashboard-title[_ngcontent-%COMP%]{color:#000;font-size:25px}.wrapper-box[_ngcontent-%COMP%]{margin-bottom:25%}@media only screen and (max-width:991px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type, th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding:10px}.mat-table[_ngcontent-%COMP%]{background-color:transparent}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{height:100%;margin:0 0 10px;display:block;background-color:#fff}.mat-row[_ngcontent-%COMP%]:hover{background-color:rgba(235,166,26,.53)}td.mat-cell[_ngcontent-%COMP%]{padding:10px;display:block;text-align:right}td.mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:16px}td.mat-cell[data-label=edit][_ngcontent-%COMP%]{padding:10px 10px 0}}"]}),t})(),X=(()=>{class t{constructor(t,e){this.restService=t,this._profileUpdateService=e}getQuestionByAstroId(t){return this.restService.create(C.a.getQuestionByAstroId,t)}replyReports(t){return this._profileUpdateService.createFormData(C.a.replyReports,t)}deductQtsAnsBalance(t){return this.restService.create(C.a.deductBalance,t)}acceptReject(t){return this.restService.create(C.a.acceptRejectReq,t)}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(V.a),c.Zb(w.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Y=["questionSideNav"];function Z(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Edit "),c.Ub())}function tt(t,e){1&t&&(c.Vb(0,"mat-icon"),c.Kc(1," edit "),c.Ub())}function et(t,e){if(1&t){const t=c.Wb();c.Vb(0,"td",47),c.dc("click",(function(){c.Bc(t);const a=e.$implicit,r=c.hc(),o=c.xc(2);return r.editQuestion(o,a)})),c.Ic(1,tt,2,0,"mat-icon",48),c.Ub()}if(2&t){const t=e.$implicit;c.Cb(1),c.pc("ngIf",!t.isAnswered&&(null==t.isRequestAccpted||t.isRequestAccpted))}}function at(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," SrNo. "),c.Ub())}function rt(t,e){if(1&t&&(c.Vb(0,"td",49),c.Kc(1),c.Ub()),2&t){const t=e.index;c.Cb(1),c.Mc(" ",t+1," ")}}function ot(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Report Type "),c.Ub())}function it(t,e){if(1&t&&(c.Vb(0,"td",50),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.Mc(" ",t.reportSubType,"")}}function nt(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Name "),c.Ub())}function ct(t,e){if(1&t&&(c.Vb(0,"td",51),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.Mc(" ",t.firstName," ")}}function st(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Mobile Number "),c.Ub())}function lt(t,e){if(1&t&&(c.Vb(0,"td",52),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.Mc(" ",t.mobileNumber," ")}}function dt(t,e){1&t&&(c.Vb(0,"th",46),c.Kc(1," Action "),c.Ub())}function bt(t,e){if(1&t&&(c.Vb(0,"mat-option",58),c.Kc(1),c.Ub()),2&t){const t=e.$implicit;c.pc("value",t.name),c.Cb(1),c.Mc(" ",t.name," ")}}function mt(t,e){if(1&t){const t=c.Wb();c.Vb(0,"td",53),c.Vb(1,"div",54),c.Vb(2,"mat-form-field",55),c.Vb(3,"mat-label"),c.Kc(4,"Status"),c.Ub(),c.Vb(5,"mat-select",56),c.dc("selectionChange",(function(a){c.Bc(t);const r=e.$implicit,o=e.index;return c.hc().statusChange(a,r,o)})),c.Ic(6,bt,2,2,"mat-option",57),c.Ub(),c.Ub(),c.Ub(),c.Ub()}if(2&t){const t=e.$implicit,a=c.hc();c.Cb(5),c.pc("value",t.isRequestAccpted?"Accept":null==t.isRequestAccpted?"":"Reject")("disabled",null!=t.isRequestAccpted),c.Cb(1),c.pc("ngForOf",a.statusTypeList)}}function ut(t,e){1&t&&c.Qb(0,"tr",59)}function pt(t,e){1&t&&c.Qb(0,"tr",60)}function ft(t,e){if(1&t&&(c.Vb(0,"tr",61),c.Vb(1,"td",62),c.Kc(2),c.Ub(),c.Ub()),2&t){c.hc();const t=c.xc(55);c.Cb(2),c.Mc('No data matching the filter "',t.value,'"')}}const ht=function(){return[5,10,25,100]};let gt=(()=>{class t{constructor(t,e,a,r,o,n){this._authService=t,this._formBuilder=e,this._authenticationService=a,this._commonService=r,this._astroReportService=o,this._dialog=n,this.displayedColumns=["edit","srNo","reportSubType","firstName","mobileNumber","actions"],this.mode=new i.d("over"),this.characters=0,this.statusTypeList=[],this.statusTypeList=[{id:1,name:"Accept"},{id:2,name:"Reject"}]}ngOnInit(){this.validateForm=this._formBuilder.group({firstName:[{value:null,disabled:!0},[i.t.required]],lastName:[{value:null,disabled:!0},[i.t.required]],comment:[{value:null,disabled:!0},[i.t.required,i.t.email]],mobileNumber:[{value:null,disabled:!0},[i.t.required]],reportSubType:[{value:null,disabled:!0},[i.t.required]],employment:[{value:null,disabled:!0},[i.t.required]],message:[null,[i.t.required]]}),this.dataSource=new m.k(this.users),this.userData=this._authenticationService.getUser(),this.getQuestionByAstrologer()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getQuestionByAstrologer(){null!=this.userData?this._astroReportService.getQuestionByAstroId({astrologerId:this.userData._id}).subscribe(t=>{console.log("getQuestionByAstroId ResponseBody ",t);let e=t.message;if(200==t.status){let a=[];t.data.map(t=>{a.push({_id:t._id,astrologerId:t.astrologerId,comment:t.comment,createdAt:t.createdAt,employment:t.employment,firstName:t.firstName,lastName:t.lastName,mobileNumber:t.mobileNumber,reportSubType:t.reportSubType,reportType:t.reportType,userId:t.userId,isAnswered:t.isAnswered,isRequestAccpted:t.isRequestAccpted}),this.users=a}),console.log("this.users ",this.users),this.dataSource=new m.k(this.users),this.ngAfterViewInit(),this._commonService.tostMessage(e)}else 300==t.status?(this._commonService.tostMessage(e),this._authService.logOut()):this._commonService.tostMessage(e)}):alert("Astro login required")}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editQuestion(t,e){t.toggle(),console.log("Side bar data",e),this.validateForm.patchValue({firstName:e.firstName,lastName:e.lastName,comment:e.comment,mobileNumber:e.mobileNumber,reportSubType:e.reportSubType,employment:e.employment}),this.selectedUser=e}submitForm(t){for(const a in this.validateForm.controls)this.validateForm.controls[a].markAsDirty(),this.validateForm.controls[a].updateValueAndValidity();console.log("submit Form ",t),console.log("this.selectedUser ",this.selectedUser);const e=new FormData;e.append("message",t.message),e.append("userId",this.selectedUser.userId),e.append("astrologerId",this.selectedUser.astrologerId),e.append("queryId",this.selectedUser._id),e.append("reportType",this.selectedUser.reportType),this._astroReportService.replyReports(e).subscribe(t=>Object(b.b)(this,void 0,void 0,(function*(){console.log("responseDataa ",t);let e=t.message;200==t.status?(this._commonService.tostMessage(e),this.dataSource.data.filter((t,e)=>{this.selectedUserIndex==e&&(t.isAnswered=!0)}),this.dataSource.filter="",this.validateForm.reset(),this.sidenav.close()):300==t.status?(this._commonService.tostMessage(e),this._authService.logOut()):this._commonService.tostMessage(e)})))}resetForm(t){t.preventDefault(),this.validateForm.controls.message.reset();for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsPristine(),this.validateForm.controls[e].updateValueAndValidity()}count(t){this.characters=0+t.length}closeDrawer(t){t.toggle(),this.validateForm.reset(),this.selectedUserStatusEvent.source.writeValue(null)}statusChange(t,e,a){this.selectedUser=e,this.selectedUserStatusEvent=t,this.selectedUserIndex=a,this._dialog.open(g,{width:"400px"}).afterClosed().subscribe(r=>{if("Y"==r){let r=JSON.parse(sessionStorage.getItem("userData"));this.acceptReject({userId:r.userId,queryId:e._id,isRequestAccpted:t&&"Accept"==t.value?"true":"false"}).then(e=>{console.log(e,"response"),t&&"Accept"==t.value&&this.deductions(),this.dataSource.data.filter((e,r)=>{a==r&&(e.isRequestAccpted=!(!t||"Accept"!=t.value))}),this.dataSource.filter=""})}else t.source.writeValue(null)})}deductions(){return new Promise(t=>{this._astroReportService.deductQtsAnsBalance({type:"qa",userId:this.selectedUser.userId,astrologerId:this.selectedUser.astrologerId}).subscribe(e=>t(e))})}acceptReject(t){return new Promise(e=>{this._astroReportService.acceptReject(t).subscribe(t=>e(t))})}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(v.a),c.Pb(i.c),c.Pb(_.a),c.Pb(U.a),c.Pb(X),c.Pb(f.b))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-astro-question"]],viewQuery:function(t,e){var a;1&t&&(c.Pc(u.a,!0),c.Pc(p.a,!0),c.Pc(Y,!0)),2&t&&(c.wc(a=c.ec())&&(e.paginator=a.first),c.wc(a=c.ec())&&(e.sort=a.first),c.wc(a=c.ec())&&(e.sidenav=a.first))},decls:80,vars:9,consts:[[1,"drawer-container"],["position","end","disableClose","",3,"mode"],["questionSideNav",""],["mat-mini-fab","","color","primary","aria-label","Close Menu",1,"close-drawer",3,"click"],[1,"form-wrapper"],[1,"separator","mb-5"],[1,"edit-form-title","text"],["name","validateForm","novalidate","",3,"formGroup"],[1,"form-field-width"],["matInput","","formControlName","firstName","required",""],["matInput","","formControlName","lastName","required",""],["matInput","","formControlName","reportSubType","required",""],["matInput","","formControlName","employment","required",""],[1,"form-field-full-width"],["matInput","","formControlName","comment","required",""],["matInput","","formControlName","message","maxlength","2000","required","",3,"keyup"],["message",""],["align","start"],[1,"mt-5"],["mat-raised-button","","color","primary","aria-label","LOGIN",1,"submit-button","mt-3","mr-5",3,"disabled","click"],["mat-stroked-button","","color","warn",1,"mt-3",3,"click"],[1,"container","wrapper-box"],["mat-mini-fab","","color","primary","routerLink","/dashboard",1,"my-3"],[1,"separator","mb-1"],[1,"dashboard-title","text"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8","mb-5"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","edit-report","mat-cell","","data-label","Edit",3,"click",4,"matCellDef"],["matColumnDef","srNo"],["mat-cell","","data-label","SrNo.",4,"matCellDef"],["matColumnDef","reportSubType"],["mat-cell","","data-label","Report Type",4,"matCellDef"],["matColumnDef","firstName"],["mat-cell","","data-label","Name",4,"matCellDef"],["matColumnDef","mobileNumber"],["mat-cell","","data-label","Mobile Number",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","data-label","Action",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell","","data-label","Edit",1,"edit-report",3,"click"],[4,"ngIf"],["mat-cell","","data-label","SrNo."],["mat-cell","","data-label","Report Type"],["mat-cell","","data-label","Name"],["mat-cell","","data-label","Mobile Number"],["mat-cell","","data-label","Action"],[1,"select-status"],["appearance","fill"],[3,"value","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){if(1&t){const t=c.Wb();c.Vb(0,"mat-sidenav-container",0),c.Vb(1,"mat-sidenav",1,2),c.Vb(3,"button",3),c.dc("click",(function(){c.Bc(t);const a=c.xc(2);return e.closeDrawer(a)})),c.Vb(4,"mat-icon"),c.Kc(5,"close"),c.Ub(),c.Ub(),c.Vb(6,"div",4),c.Vb(7,"div",5),c.Vb(8,"span",6),c.Kc(9,"Reply Question Form"),c.Ub(),c.Ub(),c.Vb(10,"form",7),c.Vb(11,"mat-form-field",8),c.Vb(12,"mat-label"),c.Kc(13,"First Name"),c.Ub(),c.Qb(14,"input",9),c.Ub(),c.Vb(15,"mat-form-field",8),c.Vb(16,"mat-label"),c.Kc(17,"Last Name"),c.Ub(),c.Qb(18,"input",10),c.Ub(),c.Vb(19,"mat-form-field",8),c.Vb(20,"mat-label"),c.Kc(21,"Report Type"),c.Ub(),c.Qb(22,"input",11),c.Ub(),c.Vb(23,"mat-form-field",8),c.Vb(24,"mat-label"),c.Kc(25,"Employment"),c.Ub(),c.Qb(26,"input",12),c.Ub(),c.Vb(27,"mat-form-field",13),c.Vb(28,"mat-label"),c.Kc(29,"Question"),c.Ub(),c.Qb(30,"textarea",14),c.Ub(),c.Vb(31,"mat-form-field",13),c.Vb(32,"mat-label"),c.Kc(33,"Answer"),c.Ub(),c.Vb(34,"textarea",15,16),c.dc("keyup",(function(){c.Bc(t);const a=c.xc(35);return e.count(a.value)})),c.Ub(),c.Vb(36,"mat-hint",17),c.Kc(37),c.Ub(),c.Ub(),c.Vb(38,"div",18),c.Vb(39,"button",19),c.dc("click",(function(){return e.submitForm(e.validateForm.value)})),c.Kc(40," Submit "),c.Ub(),c.Vb(41,"button",20),c.dc("click",(function(t){return e.resetForm(t)})),c.Kc(42," Reset "),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(43,"mat-sidenav-content"),c.Vb(44,"div",21),c.Vb(45,"button",22),c.Vb(46,"mat-icon"),c.Kc(47,"keyboard_arrow_left"),c.Ub(),c.Ub(),c.Vb(48,"div",23),c.Vb(49,"span",24),c.Kc(50,"Questions"),c.Ub(),c.Ub(),c.Vb(51,"mat-form-field"),c.Vb(52,"mat-label"),c.Kc(53,"Filter"),c.Ub(),c.Vb(54,"input",25,26),c.dc("keyup",(function(t){return e.applyFilter(t)})),c.Ub(),c.Ub(),c.Vb(56,"div",27),c.Vb(57,"table",28),c.Tb(58,29),c.Ic(59,Z,2,0,"th",30),c.Ic(60,et,2,1,"td",31),c.Sb(),c.Tb(61,32),c.Ic(62,at,2,0,"th",30),c.Ic(63,rt,2,1,"td",33),c.Sb(),c.Tb(64,34),c.Ic(65,ot,2,0,"th",30),c.Ic(66,it,2,1,"td",35),c.Sb(),c.Tb(67,36),c.Ic(68,nt,2,0,"th",30),c.Ic(69,ct,2,1,"td",37),c.Sb(),c.Tb(70,38),c.Ic(71,st,2,0,"th",30),c.Ic(72,lt,2,1,"td",39),c.Sb(),c.Tb(73,40),c.Ic(74,dt,2,0,"th",30),c.Ic(75,mt,7,3,"td",41),c.Sb(),c.Ic(76,ut,1,0,"tr",42),c.Ic(77,pt,1,0,"tr",43),c.Ic(78,ft,3,1,"tr",44),c.Ub(),c.Qb(79,"mat-paginator",45),c.Ub(),c.Ub(),c.Ub(),c.Ub()}2&t&&(c.Cb(1),c.pc("mode",e.mode.value),c.Cb(9),c.pc("formGroup",e.validateForm),c.Cb(27),c.Mc("",e.characters," / 2000"),c.Cb(2),c.pc("disabled",e.validateForm.invalid),c.Cb(18),c.pc("dataSource",e.dataSource),c.Cb(19),c.pc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.pc("matRowDefColumns",e.displayedColumns),c.Cb(2),c.pc("pageSizeOptions",c.rc(8,ht)))},directives:[S.b,S.a,h.a,l.a,i.u,i.o,i.g,M.c,M.g,I.b,i.b,i.n,i.e,i.s,i.i,M.f,S.c,n.d,m.j,p.a,m.c,m.e,m.b,m.g,m.i,u.a,m.d,p.b,m.a,r.k,P.a,r.j,N.n,m.f,m.h],styles:[".drawer-container[_ngcontent-%COMP%]   button.close-drawer[_ngcontent-%COMP%]{margin-left:15px}table[_ngcontent-%COMP%]{width:100%}.mat-drawer[_ngcontent-%COMP%]{max-width:75%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.form-wrapper[_ngcontent-%COMP%]{text-align:center}.form-wrapper[_ngcontent-%COMP%]   .form-field-width[_ngcontent-%COMP%]{width:40%;margin-right:10px;line-height:25px}.form-wrapper[_ngcontent-%COMP%]   .form-field-full-width[_ngcontent-%COMP%]{width:83%}.form-wrapper[_ngcontent-%COMP%]   .edit-form-title[_ngcontent-%COMP%]{color:#000;font-size:18px}.mat-row[_ngcontent-%COMP%]:hover{background:rgba(235,166,26,.53)}.edit-report[_ngcontent-%COMP%]{cursor:pointer}.dashboard-title[_ngcontent-%COMP%]{color:#000;font-size:25px}.wrapper-box[_ngcontent-%COMP%]{margin-bottom:25%}@media only screen and (max-width:991px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type, th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding:10px}.mat-table[_ngcontent-%COMP%]{background-color:transparent}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{height:100%;margin:0 0 10px;display:block;background-color:#fff}.mat-row[_ngcontent-%COMP%]:hover{background-color:rgba(235,166,26,.53)}td.mat-cell[_ngcontent-%COMP%]{padding:10px;display:block;text-align:right}td.mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:16px}td.mat-cell[data-label=edit][_ngcontent-%COMP%]{padding:10px 10px 0}}"]}),t})();var vt=a("aqdA");const Ut=[{path:"",component:d,canActivate:[vt.a]},{path:"astroReport",component:H,canActivate:[vt.a]},{path:"astroQuestion",component:gt,canActivate:[vt.a]}];let Ct=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(Ut)],n.e]}),t})();a.d(e,"DashboardModuleModule",(function(){return Vt}));let Vt=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)},providers:[vt.a],imports:[[Ct,r.c,o.a,i.h,i.r]]}),t})()}}]);